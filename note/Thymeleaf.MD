
# Thymeleaf

> HTML, XML, JavaScript, CSS ë“±ì˜ í…œí”Œë¦¿ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë²„ì¸¡ Java í…œí”Œë¦¿ ì—”ì§„
ì„œë¸”ë¦¿ìœ¼ë¡œ ë³€í™˜í•˜ì§€ ì•Šê³  í…œí”Œë¦¿ì„ íŒŒì‹±í•´ì„œ ì›¹ í˜ì´ì§€ ìƒì„±
- ThymeleafëŠ” ìë°” ì½”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ
- ThymeleafëŠ” ì„œë²„ì¸¡ì—ì„œ í•´ì„ëœë‹¤.
- ë””ìì´ë„ˆê°€ WAS ì—†ì´ HTMLì„ ìˆ˜ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í¸ë¦¬
- HTMLì„ íŒŒì‹±í•´ì„œ ë°ì´í„° ë°”ì¸ë”©í•˜ì—¬ ì›¹ í˜ì´ì§€ ìƒì„±(ì„œë¸”ë¦¿ìœ¼ë¡œ ë³€í™˜í•˜ì§€ ì•ŠìŒ)
- Thymeleafê°€ í•´ì„í•˜ëŠ” html íŒŒì¼ì„ templeteì´ë¼ê³  ë§í•œë‹¤.

## ğŸ–¼Thymeleaf ë ˆì´ì•„ì›ƒ
### th:fragment
> fragment file ì•ˆì—ì„œ ì„¸ë¶€ì¡°ê°ìœ¼ë¡œ ì •ì˜(ì„¸ë¶€ ì¡°ê°ë³„ë¡œ ì™¸ë¶€ë¡œ ì‚½ì…ì‹œí‚¬ ëª©ì )
```html
<div th:fragment="name"></div>
```
<hr/>

### th:insert="~{/Â·Â·Â·/fragmentFile[::name]}"
> ì ìš© íƒœê·¸ì˜ ìì‹ ë‚´ìš©ìœ¼ë¡œ fragmentë¥¼ ì‚½ì…
- fragment íŒŒì¼ë§Œ ìˆì„ ê²½ìš° fragmentì˜ ì „ì²´ ë‚´ìš©ì„ ì‚½ì…
```html
<div th:insert="~/common/íŒŒì¼ì´ë¦„"></div>
<div th:insert="~/common/layout"></div>
```

- ::nameì´ ìˆì„ ê²½ìš° frament íŒŒì¼ ì•ˆì˜ ì„¸ë¶€ ì¡°ê°ë§Œ ì‚½ì…
```html
<th:block th:fragment="header">
	...
</th:block>  
```
```html
<div th:insert="~{/common/íŒŒì¼ì´ë¦„::name"></th:block>
<div th:insert="~{/common/layout::header"></th:block>
```
<hr />

### th:replace="~{/Â·Â·Â·/fragmentFile[::name]}"
> ì ìš© íƒœê·¸ ëŒ€ì‹ í•´ì„œ ì‚½ì…
- **th:block**: html íƒœê·¸ê°€ í•„ìš” ì—†ì„ ê²½ìš° ì‚¬ìš©, thymeleaf ì†ì„±ë§Œ ê¸°ìˆ í•˜ê¸° ìœ„í•´ 
```html
<th:block th:replace="~{/common/layout}"></th:block>
<th:block th:replace="~{/common/layout::header}"></th:block>
```
<hr />

### ë§¤ê°œ ë³€ìˆ˜í™”ëœ th:fragment
#### ë ˆì´ì•„ì›ƒ íŒŒì¼
```html
<th:block th:fragment="setContent(content)" >
	<th:block th:replace="${content}"/>
</th:block>
```
#### ë ˆì´ì•„ì›ƒì— ë„£ì„ íŒŒì¼
>this::ì…€ë ‰í„°
- **content**: fragment ì¤‘ì—ì„œ content nameì„ ê°€ì§„ íŒŒì¼ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬

```html
<th:block th:replace="~{common/layout::setContent(~{this::content})}">
	<th:block th:fragment="content">
		<div class="card m2">
			<div class="card-header">Home</div>
			<div class="card-body"></div>
		</div>
	</th:block>
</th:block>
```
- **#content**: idê°€ contentì¸ fragment ì „ë‹¬
```html
<th:block th:replace="~{common/layout::setContent(~{this::#content})}">
	<div id="content" class="card m2">
		<div class="card-header">Home</div>
		<div class="card-body"></div>
	</div>
</th:block>
```

- **.content**: classê°€ contentì¸ fragment ì „ë‹¬
## âœ’í…ìŠ¤íŠ¸ ì‚½ì…
### ì†ì„±ì„ í†µí•œ ì‚½ì…
- **th:text**: ì†ì„±ê°’ì˜ íƒœê·¸ë¥¼ ë¬¸ì ì°¸ì¡°ë¡œ ë³€í™˜í•´ì„œ ì¶œë ¥
- **th:utext**: ì†ì„±ê°’ì˜ íƒœê·¸ë¥¼ ê·¸ëŒ€ë¡œ ì¶œë ¥
- **${}** : Variable Expressionsìœ¼ë¡œ ëª¨ë¸ ì†ì„±ê°’ ì¶œë ¥
- **#dates** - Thymeleafì—ì„œ ì œê³µí•˜ëŠ” Utility Objects
```html
<div>bno: <span th:text="${board.bno}"></span></div>
<div>btitle: <span th:text="${board.btitle}"></span></div>
<div>bcontent: <span th:text="${board.bcontent}"></span></div>
<div>bcontent(unescaped): <span th:utext="${board.bcontent}"></span></div>
<div>mid: <span th:text="${board.mid}"></span></div>
<div>bdate: <span th:text="${#dates.format(board.bdate, 'yyyy.MM.dd')}"></span></div>
```
<hr />

### ì¸ë¼ì¸ ì‚½ì…
- **[[...]]**: ...ì— í¬í•¨ëœ íƒœê·¸ë¥¼ ë¬¸ì ì°¸ì¡°ë¡œ ë³€í™˜í•´ì„œ ë¬¸ìë¡œ ì¶œë ¥
- **[(...)]**: ...ì— í¬í•¨ëœ íƒœê·¸ë¥¼ ê·¸ëŒ€ë¡œ ì¶œë ¥
```html
<div>bno: [[${board.bno}]]</div>
<div>btitle: <span>[[${board.btitle}]]</span></div>
<div>bcontent: <span>[[${board.bcontent}]]</span></div>
<div>bcontent(unescaped): <span>[(${board.bcontent})]</span></div>
<div>mid: [[${board.mid}]]</div>
<div>bdate: [[${#dates.format(board.bdate, 'yyyy.MM.dd')}]]</div>
```

## ğŸ²JavaScript ë°ì´í„° ì‚½ì…
>  **[(...)]** ì„ ì´ìš©
- **th:inline:"javascript"** 
	- ì‚½ì…ë˜ëŠ” ë°ì´í„°ê°€ ë¬¸ìì—´ì¼ ê²½ìš° ìë™ìœ¼ë¡œ í° ë”°ì˜´í‘œ ë¶™ì—¬ì¤€ë‹¤.
	- ìë°” ë°°ì—´ì„ javacript ë°°ì—´ë¡œ ìë™ìœ¼ë¡œ ë³€í™˜í•œë‹¤.
	- ìë°” ê°ì²´ë¥¼ javacript ê°ì²´ë¡œ ìë™ìœ¼ë¡œ ë³€í™˜í•œë‹¤.
	- ìë°”ì—ì„œ ì‘ì„±ëœ JsonObjectëŠ” JSON.parse()ë¥¼ ì‚¬ìš©í•´ì„œ ë³€í™˜í•´ì•¼ í•œë‹¤.
```html
<script th:inline="javascript">
	//ë¬¸ìì—´
	let name = [[${name}]];
	console.log("name: ", name);
	
	// ë°°ì—´
	let hobby = [[${hobby}]];
	console.log("hobby: ", hobby);
	
	// ê°ì²´
	let board = [[${board}]];
	console.log("board: ", board);
	
	// jsonê°ì²´
	let jsonBoard = JSON.parse([[${jsonBoard}]]);
	console.log("jsonBoard: ", jsonBoard);

	// Backtick ë°”ì¸ë”© ê¸°í˜¸ì™€ ì°¨ì´
	var name = [[${name}]]; 	// ServerSideì—ì„œ ë°ì´í„° ë°”ì¸ë”©
	var message = `Your's Name is ${name}`; // ClientSideì—ì„œ ë°ì´í„° ë°”ì¸ë”©
	console.log("message: " + message);

</script>
```

## ğŸ’¡í‘œì¤€ í‘œí˜„ì‹ ë¬¸ë²•

### í‘œì¤€ í‘œí˜„ì‹ ì¢…ë¥˜
```
Variable Expressions: ${...}
Selection Variable Expressions: *{...}
Message Expressions: #{...}
Link URL Expressions: @{...}
Fragment Expressions: ~{...}
```
<hr />

### í‘œì¤€ í‘œí˜„ì‹ ì‘ì„± ìœ„ì¹˜
- ìœ íš¨ì„± ê²€ì‚¬í•  ë•Œ data-th-text ì‚¬ìš©í•´ì•¼í•œë‹¤.
```
th:*="í‘œí˜„ì‹"
data-th-*="í‘œí˜„ì‹"
<tag> â€¦ í‘œí˜„ì‹ â€¦  </tag>
```
<hr/>

### Variable Expressions
> th:text
```html
<div th:text="${'Current user : '+ session.sessionMid}"></div>
<div th:text="'Current user : ' + ${session.sessionMid}"></div>
<div th:text="|Current user : ${session.sessionMid}|"></div>
<div>Current user : [[${session.sessionMid}]]</div>
```
<hr/>

### Selection Variable Expressions
>  th:object 
- **\*** : ì–´ë–¤ ê°ì²´ì˜ ì†ì„±ê°’
```html
<th:block th:object="${board}">
	<div>bno: [[*{bno}]]</div>
	<div>btitle: [[*{btitle}]]</div>
	<div>bcontent: [[*{bcontent}]]</div>
	<div>bcontent(unescaped): [(*{bcontent})]</div>
	<div>mid: [[*{mid}]]</div>
	<div>bdate: [[*{#dates.format(bdate, 'yyyy.MM.dd')}]]</div>
</th:block>
```
<hr/>

### Message Variable Expressions
```html
<h6>[[#{welcome}]]</h6>
<button class="btn btn-sm btn-info">[[#{btn.join}]]</button>
```
<hr/>

### Link URL Expressions
> @{...}

#### ìƒëŒ€ ì£¼ì†Œ
```html
<a th:href="@{update}" class="btn btn-info btn-sm">Page-relative</a>
```
<hr/>

#### ì»¨í…ìŠ¤íŠ¸ ìƒëŒ€ ì£¼ì†Œ
- **${/..}** : contextPathë¥¼ ìë™ìœ¼ë¡œ ì•ì— ë¶™ì—¬ ì£¼ì–´, ì ˆëŒ€ ê²½ë¡œë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤.
```html
<a th:href="@{/thymeleaf/update}" class="btn btn-info btn-sm">Context-relative(excluded contextRoot)</a>
<link rel="stylesheet" th:href="@{/bootstrap-4.6.0-dist/css/bootstrap.min.css}"/>
<script th:src="@{/jquery/jquery-3.5.1.min.js}"></script>
```
<hr/>

#### ì„œë²„ ìƒëŒ€ ì£¼ì†Œ
- **${~/contextRoot/...}** : ì›¹ì„œë²„ì˜ cotextRootë¥¼ ì§€ì •í•  ìˆ˜ ìˆì–´ì„œ, ê°™ì€ wasì˜ ë‹¤ë¥¸ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
```html
<a th:href="@{~/wepapp/thymeleaf/update}" class="btn btn-info btn-sm">Context-relative(excluded contextRoot)</a>
```
<hr/>

#### ê²½ë¡œ ë§Œë“¤ê¸° ì—°ìŠµ
```
model.addAttribute("typeId", "t2");
model.addAttribute("productId", "p1");
model.addAttribute("pageNo", "1");
model.addAttribute("url1", "/thymeleaf/linkUrlExpressions/t1/detail");
model.addAttribute("url2", "/t1/detail");
```
```html
<!-- /thymeleaf/linkUrlExpressions/t1/detail?productId=xxx&pageNo=yyy -->
<a th:href="@{/thymeleaf/linkUrlExpressions/t1/detail(productId=${productId}, pageNo=${pageNo})}" class="btn btn-sm btn-info">URL Parameters</a>
<a th:href="@{/thymeleaf/linkUrlExpressions/{typeId}/detail(typeId=${typeId},productId=${productId}, pageNo=${pageNo})}" class="btn btn-sm btn-info">Path Variables</a>
<a th:href="@{${url1}(productId=${productId}, pageNo=${pageNo})}" class="btn btn-sm btn-info">URL insert1</a>
<a th:href="@{'/thymeleaf/linkUrlExpressions' + ${url2}(productId=${productId}, pageNo=${pageNo})}" class="btn btn-sm btn-info">URL insert2</a>
```
<hr/>

### ì¡°ê±´

#### th:if
> if ë¬¸
- trueë¡œ ì‚°ì • í•˜ëŠ” ê²½ìš°
	- boolean : true
	- number : 0ì´ ì•„ë‹Œ ê²½ìš°
	- charater: ë¬¸ìê°€ ìˆëŠ” ê²½ìš°
	- string : â€“"false", "off", "no" ì´ ì•„ë‹Œ ê²½ìš°
	- ìˆ«ì, ë¬¸ì, ë¬¸ìì—´ì¸ ê²½ìš°
- display íš¨ê³¼
	- ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ë³´ì—¬ì£¼ê³ , ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ ë³´ì—¬ì£¼ì§€ ì•ŠëŠ”ë‹¤.
```html
<th:block th:if="${session.sessionMid == null}">
	<a href="conditional?option=true" class="btn btn-info btn-sm">ë¡œê·¸ì¸</a>
</th:block>		
```
<hr/>

#### th:unless
> ifì— ëŒ€í•œ else ë¬¸
- ${â€¦}ëŠ” th:ifì™€ ë™ì¼í•˜ê²Œ ì‘ì„±

```html
<th:block th:unless="${session.sessionMid == null}">
	<a href="conditional?option=false" class="btn btn-danger btn-sm">ë¡œê·¸ì•„ì›ƒ</a>
</th:block>
```
<hr/>

#### th:switch
> switch ë¬¸
- th:switch="${...}"
	- th:case="value"
	- th:case="value"
	- th:case="*"

```html
<th:block th:switch="${type}">
	<th:block th:case="a">
		<li>type-a-1</li>
		<li>type-a-2</li>
	</th:block>

	<th:block th:case="b">
		<li>type-b-1</li>
		<li>type-b-2</li>
	</th:block>

	<th:block th:case="*">
		<li>type-1</li>
		<li>type-2</li>
	</th:block>
</th:block>
```
<hr/>

### ë°˜ë³µ
### th:each
> ë°˜ë³µ
- th:each=â€œitem, status : ${iterableValues}â€

```html
<th:block th:each="board, status : ${list}">
	<th:block th:if=${status.first}>
		<table class="table table-sm table-bordered">
			<tr>
				<th class="text-center" style="width: 70px">ìˆœë²ˆ</th>
				<th class="text-center" style="width: 70px">ê¸€ë²ˆí˜¸</th>
				<th class="text-center">ê¸€ì œëª©</th>
				<th class="text-center" style="width: 120px">ê¸€ì“´ì´</th>
				<th class="text-center" style="width: 90px">ì“´ë‚ ì§œ</th>
			</tr>
	</th:block>
	<tr th:class="${status.odd}?'bg-light':''">
	<td class="text-center">[[${status.count}]]</td>
		<td class="text-center">[[${board.bno}]]</td>
		<td><a th:href="|iteration?bno=${board.bno}|">[[${board.btitle}]]</a></td>
		<td class="text-center">[[${board.mid}]]</td>
		<td class="text-center">[[${#dates.format(board.bdate,
			'yyyy.MM.dd')}]]</td>
	</tr>
	<th:block th:if=${status.last}>
		</table>
	</th:block>
</th:block>	
```

## ğŸ¬ ê¸°ë³¸ ë‚´ì¥ ê°ì²´

### param ê°ì²´ 
```html
<div>Param Total Number: [[${param.size()}]]</div>
<div>Param Total Number: [[${param.bno}]]</div>  <!-- íŒŒë¦¬ë¯¸í„° ë³€ìˆ˜ -->
<div>Param Total Number: [[${param.pageNo}]]</div> <!-- íŒŒë¦¬ë¯¸í„° ë³€ìˆ˜ -->
```
<hr/>

### request ê°ì²´
```html
<div>title: [[${title}]]</div>
<div>title: [[${#request.getAttribute("title")}]]</div>
```
<hr/>

### session ê°ì²´
```html
<div>Current User: [[${session.sessionMid}]]</div>
				<div>Current User: [[${#session.getAttribute("sessionMid")}]]</div>
```
<hr/>

### application ê°ì²´
```html
<div>Current User: [[${application.visitorCount}]]</div>
<div>Current User: [[${#servletContext.getAttribute("visitorCount")}]]</div>
```

## ğŸ¬ ìœ í‹¸ë¦¬í‹° ë‚´ì¥ ê°ì²´

### dates ê°ì²´ 
```html
<div>í¬ë§· ë¬¸ìì—´: [[${#dates.format(today, 'yyy/MM/dd HH:mm')}]]</div> í¬ë§· ë¬¸ìì—´: 2021/10/18 11:17
<div>ì¼: [[${#dates.day(today)}]]</div> ì¼: 18
<div>ì›”: [[${#dates.month(today)}]]</div> ì›”: 10
<div>ì›”: [[${#dates.monthName(today)}]]</div> ì›”: 10ì›”
<div>ì›”: [[${#dates.monthNameShort(today)}]]</div> ì›”: 10ì›”
<div>ë…„: [[${#dates.year(today)}]]</div> ë…„: 2021
<div>ìš”ì¼: [[${#dates.dayOfWeek(today)}]]</div> ìš”ì¼: 2
<div>ìš”ì¼: [[${#dates.dayOfWeekName(today)}]]</div> ìš”ì¼: ì›”ìš”ì¼
<div>ìš”ì¼: [[${#dates.dayOfWeekNameShort(today)}]]</div> ìš”ì¼: ì›”
<div>ì‹œ: [[${#dates.hour(today)}]]</div> ì‹œ: 11
<div>ë¶„: [[${#dates.minute(today)}]]</div> ë¶„: 17
<div>ì´ˆ: [[${#dates.second(today)}]]</div> ì´ˆ: 40
<div>ë°€ë¦¬ì´ˆ: [[${#dates.millisecond(today)}]]</div>> ë°€ë¦¬ì´ˆ: 790
```
<hr/>

### numbers ê°ì²´ 
```html
<div>[[${#numbers.formatInteger(1000000, 3, 'COMMA')}]]</div> 1,000,000
<div>[[${#numbers.formatDecimal(1000000.12345, 3, 2)}]]</div> 1000000.12
<div>[[${#numbers.formatDecimal(1000000.12345, 3, 'COMMA', 2,'POINT')}]]</div> 1,000,000.12
```
<hr/>

### arrays ê°ì²´ 
```html
<div>[[${#arrays.length(array)}]]</div> 3
<div>[[${#arrays.isEmpty(array)}]]</div> false 
<div>[[${#arrays.contains(array, 'boot')}]]</div> true
```
<hr/>

### lists ê°ì²´ 
```html
 <div>[[${#lists.size(array)}]]</div>	3
<div>[[${#lists.isEmpty(array)}]]</div> false
<div>[[${#lists.contains(array, 'boot')}]]</div> true
```

## ğŸ“ì£¼ì„
> \<!--/*  â€¦  */-->


> \<!--/*--> â€¦  \<!--\*/-->
- ì•ˆì˜ íƒœê·¸ê°€ ì—ë””í„°ì—ì„œ ì¸ì‹ë˜ë¯€ë¡œ, ìë™ ì™„ì„± ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´, ì‘ì„±ì´ ìœ ë¦¬í•¨
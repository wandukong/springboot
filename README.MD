

# Thymeleaf

> HTML, XML, JavaScript, CSS ë“±ì˜ í…œí”Œë¦¿ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë²„ì¸¡ Java í…œí”Œë¦¿ ì—”ì§„
ì„œë¸”ë¦¿ìœ¼ë¡œ ë³€í™˜í•˜ì§€ ì•Šê³  í…œí”Œë¦¿ì„ íŒŒì‹±í•´ì„œ ì›¹ í˜ì´ì§€ ìƒì„±
- ThymeleafëŠ” ìë°” ì½”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ
- ThymeleafëŠ” ì„œë²„ì¸¡ì—ì„œ í•´ì„ëœë‹¤.
- ë””ìì´ë„ˆê°€ WAS ì—†ì´ HTMLì„ ìˆ˜ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í¸ë¦¬
- HTMLì„ íŒŒì‹±í•´ì„œ ë°ì´í„° ë°”ì¸ë”©í•˜ì—¬ ì›¹ í˜ì´ì§€ ìƒì„±(ì„œë¸”ë¦¿ìœ¼ë¡œ ë³€í™˜í•˜ì§€ ì•ŠìŒ)
- Thymeleafê°€ í•´ì„í•˜ëŠ” html íŒŒì¼ì„ templeteì´ë¼ê³  ë§í•œë‹¤.

## ğŸ–¼Thymeleaf ë ˆì´ì•„ì›ƒ
### th:fragment
> fragment file ì•ˆì—ì„œ ì„¸ë¶€ì¡°ê°ìœ¼ë¡œ ì •ì˜(ì„¸ë¶€ ì¡°ê°ë³„ë¡œ ì™¸ë¶€ë¡œ ì‚½ì…ì‹œí‚¬ ëª©ì )
```html
<div th:fragment="name"></div>
```
<hr/>

### th:insert="~{/Â·Â·Â·/fragmentFile[::name]}"
> ì ìš© íƒœê·¸ì˜ ìì‹ ë‚´ìš©ìœ¼ë¡œ fragmentë¥¼ ì‚½ì…
- fragment íŒŒì¼ë§Œ ìˆì„ ê²½ìš° fragmentì˜ ì „ì²´ ë‚´ìš©ì„ ì‚½ì…
```html
<div th:insert="~/common/íŒŒì¼ì´ë¦„"></div>
<div th:insert="~/common/layout"></div>
```

- ::nameì´ ìˆì„ ê²½ìš° frament íŒŒì¼ ì•ˆì˜ ì„¸ë¶€ ì¡°ê°ë§Œ ì‚½ì…
```html
<th:block th:fragment="header">
	...
</th:block>  
```
```html
<div th:insert="~{/common/íŒŒì¼ì´ë¦„::name"></th:block>
<div th:insert="~{/common/layout::header"></th:block>
```
<hr />

### th:replace="~{/Â·Â·Â·/fragmentFile[::name]}"
> ì ìš© íƒœê·¸ ëŒ€ì‹ í•´ì„œ ì‚½ì…
- **th:block**: html íƒœê·¸ê°€ í•„ìš” ì—†ì„ ê²½ìš° ì‚¬ìš©, thymeleaf ì†ì„±ë§Œ ê¸°ìˆ í•˜ê¸° ìœ„í•´ 
```html
<th:block th:replace="~{/common/layout}"></th:block>
<th:block th:replace="~{/common/layout::header}"></th:block>
```
<hr />

### ë§¤ê°œ ë³€ìˆ˜í™”ëœ th:fragment
#### ë ˆì´ì•„ì›ƒ íŒŒì¼
```html
<th:block th:fragment="setContent(content)" >
	<th:block th:replace="${content}"/>
</th:block>
```
#### ë ˆì´ì•„ì›ƒì— ë„£ì„ íŒŒì¼
>this::ì…€ë ‰í„°
- **content**: fragment ì¤‘ì—ì„œ content nameì„ ê°€ì§„ íŒŒì¼ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬

```html
<th:block th:replace="~{common/layout::setContent(~{this::content})}">
	<th:block th:fragment="content">
		<div class="card m2">
			<div class="card-header">Home</div>
			<div class="card-body"></div>
		</div>
	</th:block>
</th:block>
```
- **#content**: idê°€ contentì¸ fragment ì „ë‹¬
```html
<th:block th:replace="~{common/layout::setContent(~{this::#content})}">
	<div id="content" class="card m2">
		<div class="card-header">Home</div>
		<div class="card-body"></div>
	</div>
</th:block>
```

- **.content**: classê°€ contentì¸ fragment ì „ë‹¬
## âœ’í…ìŠ¤íŠ¸ ì‚½ì…
### ì†ì„±ì„ í†µí•œ ì‚½ì…
- **th:text**: ì†ì„±ê°’ì˜ íƒœê·¸ë¥¼ ë¬¸ì ì°¸ì¡°ë¡œ ë³€í™˜í•´ì„œ ì¶œë ¥
- **th:utext**: ì†ì„±ê°’ì˜ íƒœê·¸ë¥¼ ê·¸ëŒ€ë¡œ ì¶œë ¥
- **${}** : Variable Expressionsìœ¼ë¡œ ëª¨ë¸ ì†ì„±ê°’ ì¶œë ¥
- **#dates** - Thymeleafì—ì„œ ì œê³µí•˜ëŠ” Utility Objects
```html
<div>bno: <span th:text="${board.bno}"></span></div>
<div>btitle: <span th:text="${board.btitle}"></span></div>
<div>bcontent: <span th:text="${board.bcontent}"></span></div>
<div>bcontent(unescaped): <span th:utext="${board.bcontent}"></span></div>
<div>mid: <span th:text="${board.mid}"></span></div>
<div>bdate: <span th:text="${#dates.format(board.bdate, 'yyyy.MM.dd')}"></span></div>
```
<hr />

### ì¸ë¼ì¸ ì‚½ì…
- **[[...]]**: ...ì— í¬í•¨ëœ íƒœê·¸ë¥¼ ë¬¸ì ì°¸ì¡°ë¡œ ë³€í™˜í•´ì„œ ë¬¸ìë¡œ ì¶œë ¥
- **[(...)]**: ...ì— í¬í•¨ëœ íƒœê·¸ë¥¼ ê·¸ëŒ€ë¡œ ì¶œë ¥
```html
<div>bno: [[${board.bno}]]</div>
<div>btitle: <span>[[${board.btitle}]]</span></div>
<div>bcontent: <span>[[${board.bcontent}]]</span></div>
<div>bcontent(unescaped): <span>[(${board.bcontent})]</span></div>
<div>mid: [[${board.mid}]]</div>
<div>bdate: [[${#dates.format(board.bdate, 'yyyy.MM.dd')}]]</div>
```

## ğŸ²JavaScript ë°ì´í„° ì‚½ì…
>  **[(...)]** ì„ ì´ìš©
- **th:inline:"javascript"** 
	- ì‚½ì…ë˜ëŠ” ë°ì´í„°ê°€ ë¬¸ìì—´ì¼ ê²½ìš° ìë™ìœ¼ë¡œ í° ë”°ì˜´í‘œ ë¶™ì—¬ì¤€ë‹¤.
	- ìë°” ë°°ì—´ì„ javacript ë°°ì—´ë¡œ ìë™ìœ¼ë¡œ ë³€í™˜í•œë‹¤.
	- ìë°” ê°ì²´ë¥¼ javacript ê°ì²´ë¡œ ìë™ìœ¼ë¡œ ë³€í™˜í•œë‹¤.
	- ìë°”ì—ì„œ ì‘ì„±ëœ JsonObjectëŠ” JSON.parse()ë¥¼ ì‚¬ìš©í•´ì„œ ë³€í™˜í•´ì•¼ í•œë‹¤.
```html
<script th:inline="javascript">
	//ë¬¸ìì—´
	let name = [[${name}]];
	console.log("name: ", name);
	
	// ë°°ì—´
	let hobby = [[${hobby}]];
	console.log("hobby: ", hobby);
	
	// ê°ì²´
	let board = [[${board}]];
	console.log("board: ", board);
	
	// jsonê°ì²´
	let jsonBoard = JSON.parse([[${jsonBoard}]]);
	console.log("jsonBoard: ", jsonBoard);

	// Backtick ë°”ì¸ë”© ê¸°í˜¸ì™€ ì°¨ì´
	var name = [[${name}]]; 	// ServerSideì—ì„œ ë°ì´í„° ë°”ì¸ë”©
	var message = `Your's Name is ${name}`; // ClientSideì—ì„œ ë°ì´í„° ë°”ì¸ë”©
	console.log("message: " + message);

</script>
```

## ğŸ’¡í‘œì¤€ í‘œí˜„ì‹ ë¬¸ë²•

### í‘œì¤€ í‘œí˜„ì‹ ì¢…ë¥˜
```
Variable Expressions: ${...}
Selection Variable Expressions: *{...}
Message Expressions: #{...}
Link URL Expressions: @{...}
Fragment Expressions: ~{...}
```
<hr />

### í‘œì¤€ í‘œí˜„ì‹ ì‘ì„± ìœ„ì¹˜
- ìœ íš¨ì„± ê²€ì‚¬í•  ë•Œ data-th-text ì‚¬ìš©í•´ì•¼í•œë‹¤.
```
th:*="í‘œí˜„ì‹"
data-th-*="í‘œí˜„ì‹"
<tag> â€¦ í‘œí˜„ì‹ â€¦  </tag>
```
<hr/>

### ì„¸ì…˜ ê°ì²´ ë¶ˆëŸ¬ì˜¤ê¸° 
- sessionì— ì €ì¥ëœ ê°ì²´ë¥¼ ë¶ˆëŸ¬ì˜¤ë ¤ë©´, session. ì„ ë¶™ì—¬ì•¼í•œë‹¤.
```html
<div>Current user : [[${session.sessionMid}]]</div>
<div th:text="'Current user : ' + ${session.sessionMid}"></div>
```
<hr/>

### th:if 
- display íš¨ê³¼
	- ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ë³´ì—¬ì£¼ê³ , ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ ë³´ì—¬ì£¼ì§€ ì•ŠëŠ”ë‹¤.
```html
<div>
	<a th:if="${session.sessionMid == null}" href="variableExpressions" class="btn btn-info btn-sm">ë¡œê·¸ì¸</a>
	<a th:if="${session.sessionMid != null}"href="variableExpressions" class="btn btn-info btn-sm">ë¡œê·¸ì•„ì›ƒ</a>
</div>
```
<hr/>

### Variable Expressions
> th:text
```html
<div th:text="${'Current user : '+ session.sessionMid}"></div>
<div th:text="'Current user : ' + ${session.sessionMid}"></div>
<div th:text="|Current user : ${session.sessionMid}|"></div>
<div>Current user : [[${session.sessionMid}]]</div>
```
<hr/>

### Selection Variable Expressions
>  th:object 
- **\*** : ì–´ë–¤ ê°ì²´ì˜ ì†ì„±ê°’
```html
<th:block th:object="${board}">
	<div>bno: [[*{bno}]]</div>
	<div>btitle: [[*{btitle}]]</div>
	<div>bcontent: [[*{bcontent}]]</div>
	<div>bcontent(unescaped): [(*{bcontent})]</div>
	<div>mid: [[*{mid}]]</div>
	<div>bdate: [[*{#dates.format(bdate, 'yyyy.MM.dd')}]]</div>
</th:block>
```
<hr/>

### Message Variable Expressions
```html
<h6>[[#{welcome}]]</h6>
<button class="btn btn-sm btn-info">[[#{btn.join}]]</button>
```
<hr/>

### Link URL Expressions
> @{...}
- contextPathë¥¼ ìë™ìœ¼ë¡œ ì•ì— ë¶™ì—¬ ì£¼ì–´, ì ˆëŒ€ ê²½ë¡œë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤.
```html
<link rel="stylesheet" th:href="@{/bootstrap-4.6.0-dist/css/bootstrap.min.css}"/>
<script th:src="@{/jquery/jquery-3.5.1.min.js}"></script>
<a th:href="@{/}" class="btn btn-success btn-sm">ë¡œê·¸ì¸</a>
```